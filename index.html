<!DOCTYPE html>
<html>

<head>
    <title>GPU Shadow</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <!-- core three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/EXRLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.js"></script>


    <script>

        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true; // ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏á‡∏≤!
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;

        document.body.appendChild(renderer.domElement);

        const scene = new THREE.Scene();

        // ‚úÖ ‡∏Å‡∏•‡πâ‡∏≠‡∏á
        const camera = new THREE.PerspectiveCamera(
            75,
            window.innerWidth / window.innerHeight,
            0.1,
            1000
        );
        camera.position.set(0, 2, 5);
        camera.lookAt(0, 0, 0);
        const controls = new THREE.OrbitControls(camera, renderer.domElement);

        //‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏™‡∏á
        const AmbientLight = new THREE.AmbientLight(0x504540);
        scene.add(AmbientLight);

        //‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏á‡∏≤
        // ‚úÖ ‡∏•‡∏ö directionalLight ‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô (‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÑ‡∏ß‡πâ)

function updateSunlight() {
  const now = new Date();
  const hour = now.getHours();

  let sunColor, sunIntensity, sunPosition;

  if (hour >= 5 && hour < 8) {
    // üåÖ ‡πÄ‡∏ä‡πâ‡∏≤
    sunColor = 0xffc58f;
    sunIntensity = 0.6;
    sunPosition = new THREE.Vector3(5, 2, 5);
  } else if (hour >= 8 && hour < 16) {
    // ‚òÄÔ∏è ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á
    sunColor = 0xffffff;
    sunIntensity = 1.0;
    sunPosition = new THREE.Vector3(10, 8, 10);
  } else if (hour >= 16 && hour < 19) {
    // üåá ‡∏û‡∏£‡∏∞‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏ï‡∏Å
    sunColor = 0xff9e6b;
    sunIntensity = 0.6;
    sunPosition = new THREE.Vector3(-5, 3, -5);
  } else {
    // üåô ‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô
    sunColor = 0x4a6fa5;
    sunIntensity = 0.2;
    sunPosition = new THREE.Vector3(0, 1, 0);
  }

  // ‚úÖ ‡∏•‡∏ö‡πÅ‡∏™‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
  if (scene.userData.sunLight) {
    scene.remove(scene.userData.sunLight);
  }

  // ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏™‡∏á‡πÉ‡∏´‡∏°‡πà
  const sunLight = new THREE.DirectionalLight(sunColor, sunIntensity);
  sunLight.position.copy(sunPosition);
  sunLight.castShadow = true;
  scene.add(sunLight);

  // ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô scene.userData
  scene.userData.sunLight = sunLight;
}

// ‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°
updateSunlight();

// ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ (300,000ms)
setInterval(updateSunlight, 300000);


        //pointLight
        const pointLight = new THREE.PointLight(0xffffee,0.8,8);
        pointLight.position.set(0,4,1);
        pointLight.castShadow = true ;
        scene.add(pointLight);
        const pointLightHelper = new THREE.PointLightHelper(pointLight, 0.1); // (‡πÅ‡∏™‡∏á, ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á helper)
        scene.add(pointLightHelper);



        // ‚úÖ ‡πÇ‡∏´‡∏•‡∏î texture
        const texFloor = new THREE.TextureLoader().load(
    'https://raw.githubusercontent.com/Chiratha/ALL_Model/main/rocky_terrain_02_diff_1k.jpg',
    t => {
        t.wrapS = THREE.RepeatWrapping;
        t.wrapT = THREE.RepeatWrapping;
        t.repeat.set(3, 3); // ‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
    }
);

// ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á material ‡∏à‡∏≤‡∏Å texture
        const matFloor = new THREE.MeshStandardMaterial({
            map: texFloor
});

// ‚úÖ ‡∏û‡∏∑‡πâ‡∏ô
        const planeGeometry = new THREE.PlaneGeometry(10, 10);
        const plane = new THREE.Mesh(planeGeometry, matFloor); // ‚úÖ ‡πÉ‡∏ä‡πâ matFloor ‡πÅ‡∏ó‡∏ô planeMaterial
        plane.rotation.x = -Math.PI / 2;
        plane.position.y = 0;
        plane.receiveShadow = true;
        scene.add(plane);

        // ‚úÖ render loop
        function animate(t) {
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate(0);

        window.addEventListener('keydown', (event) => {

        });

        const exrLoader = new THREE.EXRLoader();
exrLoader.load(
  'https://raw.githubusercontent.com/Chiratha/ALL_Model/main/citrus_orchard_road_puresky_1k.exr',
  function (texture) {
    texture.mapping = THREE.EquirectangularReflectionMapping;

    // ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á (Background)
    scene.background = texture;

    // ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏™‡∏á Environment ‡πÉ‡∏´‡πâ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô
    scene.environment = texture;

    console.log('‚úÖ Environment EXR Loaded');
  },
  undefined,
  function (error) {
    console.error('‚ùå Error loading EXR:', error);
  }
);
        //‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ
        const textureLoader = new THREE.TextureLoader();
        const chirTexture = textureLoader.load('https://raw.githubusercontent.com/Chiratha/ALL_Model/main/Wood.144_baseColor.jpeg');

        const loader = new THREE.OBJLoader();
    loader.load(
    'https://raw.githubusercontent.com/Chiratha/ALL_Model/refs/heads/main/chir.obj',
    function(object) {
        object.scale.set(0.5, 0.5, 0.5);

        object.traverse(function(child) {
            if (child.isMesh) {
                child.castShadow = true;
                child.receiveShadow = true;

                // ‡πÉ‡∏ä‡πâ texture ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å mesh
                if (!child.material.map) {
                    child.material = new THREE.MeshStandardMaterial({
                        map: chirTexture
                    });
                }
            }
        });

        object.position.set(0, 0, 0);
        scene.add(object);
    },
    undefined,
    function(error) {
        console.error('Error loading OBJ:', error);
    }
);
    //‡∏ï‡∏π‡πâ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå
    // ‚úÖ ‡πÇ‡∏´‡∏•‡∏î texture ‡∏Ç‡∏≠‡∏á‡∏ï‡∏π‡πâ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå
const phoneTexture = new THREE.TextureLoader().load(
  'https://raw.githubusercontent.com/Chiratha/ALL_Model/main/Red_Part_baseColor.jpeg'
);

// ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ï‡∏π‡πâ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå
const phoneLoader = new THREE.OBJLoader();
phoneLoader.load(
  'https://raw.githubusercontent.com/Chiratha/ALL_Model/refs/heads/main/phone.obj',
  function (object) {
    object.scale.set(0.5, 0.5, 0.5);

    object.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;

        // ‚úÖ ‡πÉ‡∏™‡πà texture ‡∏™‡∏µ‡πÅ‡∏î‡∏á
        child.material = new THREE.MeshStandardMaterial({
          map: phoneTexture
        });
      }
    });

    object.position.set(3, 1.0, -2.2);
    scene.add(object);
  },
  undefined,
  function (error) {
    console.error('Error loading phone OBJ:', error);
  }
);

  const teaShopLoader = new THREE.GLTFLoader();
teaShopLoader.load(
  'https://raw.githubusercontent.com/Chiratha/ALL_Model/main/japanese_tea_shop.glb',
  function (gltf) {
    const model = gltf.scene;
    model.position.set(-2, 0.4, -2.5);// ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    model.scale.set(1, 1, 1);

    // ‚úÖ ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏≤
    model.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;
      }
    });
    scene.add(model);
  },
  undefined,
  function (error) {
    console.error('Error loading GLB:', error);
  }
);

  const treeLoader = new THREE.GLTFLoader();
treeLoader.load(
  'https://raw.githubusercontent.com/Chiratha/ALL_Model/main/platano_tree.glb',
  function (gltf) {
    const model = gltf.scene;
    model.position.set(2, 0, -3.5);
    model.scale.set(0.005, 0.005, 0.005);
    model.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;
      }
    });

    scene.add(model);
  },
  undefined,
  function (error) {
    console.error('Error loading GLB:', error);
  }
);

    // ‡∏õ‡πâ‡∏≤‡∏¢‡∏ñ‡∏ô‡∏ô
  const signLoader = new THREE.GLTFLoader();
signLoader.load(
  'https://raw.githubusercontent.com/Chiratha/ALL_Model/main/pavement_sign_a_board.glb',
  function (gltf) {
    const model = gltf.scene;
    
    // ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
    model.position.set(0.5, 0.1, -1.0);

    // ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î (‡∏ñ‡πâ‡∏≤‡πÉ‡∏´‡∏ç‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡πá‡∏Å‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ)
    model.scale.set(0.25, 0.25, 0.25);

    // ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏≤
    model.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;
      }
    });

    // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ scene
    scene.add(model);
  },
  undefined,
  function (error) {
    console.error('Error loading GLB:', error);
  }
);

  // ‡∏£‡∏π‡∏õ‡∏â‡∏±‡∏ô‡πÄ‡∏≠‡∏á‡∏à‡πâ‡∏≤‡∏≤
  const MeLoader = new THREE.GLTFLoader();
MeLoader.load(
  'https://raw.githubusercontent.com/Chiratha/ALL_Model/main/name__1.glb',
  function (gltf) {
    const model = gltf.scene;
    
    model.position.set(2.4, 0.0, 2.0);
    model.scale.set(0.5, 0.5, 0.5);

    model.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;

        if (child.material.map) {
          child.material.map.anisotropy = 16;
          child.material.map.minFilter = THREE.LinearMipmapLinearFilter;
          child.material.map.magFilter = THREE.LinearFilter;
        }
      }
    });

    scene.add(model);
  },
  undefined,
  function (error) {
    console.error('Error loading GLB:', error);
  }
);

    // ‡∏ï‡∏£‡∏≤‡∏á‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢
    const ku_Loader = new THREE.GLTFLoader();
ku_Loader.load(
  'https://raw.githubusercontent.com/Chiratha/ALL_Model/main/KU_1.glb',
  function (gltf) {
    const model = gltf.scene;
    
    // ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
    model.position.set(0.5, 0.1, -1.0);

    // ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î (‡∏ñ‡πâ‡∏≤‡πÉ‡∏´‡∏ç‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡πá‡∏Å‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ)
    model.scale.set(0.25, 0.25, 0.25);

    // ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏≤
    model.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;
      }
    });

    // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ scene
    scene.add(model);
  },
  undefined,
  function (error) {
    console.error('Error loading GLB:', error);
  }
);

    
    

    </script>
</body>

</html>
